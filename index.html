<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>DrawScreen - Draw on your screen</title>
  <link rel="stylesheet" href="style.css">
  <script type="module">
    // Firebase
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-app.js";
    import { getDatabase, ref, get, set, runTransaction } from "https://www.gstatic.com/firebasejs/10.12.3/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDEw59bHhaUpcgYdb9kHVmMNmNoaZO7i48",
      authDomain: "drawscreen-abfa5.firebaseapp.com",
      databaseURL: "https://drawscreen-abfa5-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "drawscreen-abfa5",
      storageBucket: "drawscreen-abfa5.firebasestorage.app",
      messagingSenderId: "906201269653",
      appId: "1:906201269653:web:451010cb0e41967e0e229c",
      measurementId: "G-VMHG8LVS5K"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    const viewsRef = ref(db, 'stats/views');
    const downloadsRef = ref(db, 'stats/downloads');

    // Count view
    runTransaction(viewsRef, (count) => (count || 0) + 1);

    // Update live
    function updateStats() {
      get(viewsRef).then(snap => document.getElementById('views-count').innerText = snap.val() ?? 0);
      get(downloadsRef).then(snap => document.getElementById('downloads-count').innerText = snap.val() ?? 0);
    }
    updateStats();

    // Count downloads
    function handleDownload() {
      runTransaction(downloadsRef, (count) => (count || 0) + 1);
      setTimeout(updateStats, 1000);
      window.open("https://www.mediafire.com/file/pq0xpfchpbblnly/clientDr.exe/file", "_blank");
    }

    window.addEventListener("DOMContentLoaded", () => {
      document.querySelector(".download-btn").addEventListener("click", handleDownload);
    });
  </script>
</head>
<body>
  <header>
    <h1>DrawScreen ğŸ¨</h1>
    <p>A lightweight tool to draw directly on your screen with hotkeys.</p>
    <button class="download-btn">â¬‡ï¸ Download Now</button>
  </header>

  <main>
    <div class="stats">
      ğŸ‘ï¸ Views: <span id="views-count">...</span> Â· â¬‡ï¸ Downloads: <span id="downloads-count">...</span>
    </div>

    <h2 class="section-title">Screenshots</h2>
    <div class="screenshots">
      <img src="assets/ss/ss1.png" alt="Screenshot 1">
      <img src="assets/ss/ss2.png" alt="Screenshot 2">
      <img src="assets/ss/ss3.png" alt="Screenshot 3">
    </div>

    <section class="faq">
      <h2>FAQ</h2>
      <details>
        <summary>â“ How do I start drawing?</summary>
        <p>Use <b>CTRL+ALT+Z</b> to toggle the drawing window. Then use hotkeys inside it.</p>
      </details>
      <details>
        <summary>ğŸ¨ How do I change brush size?</summary>
        <p>Press <b>O</b> to increase, <b>I</b> to decrease brush size.</p>
      </details>
      <details>
        <summary>ğŸŒˆ Can I pick a color?</summary>
        <p>Yes! Use <b>CTRL+SHIFT+C</b> to pick a color directly from the screen.</p>
      </details>
      <details>
        <summary>ğŸ’¾ How big is the app?</summary>
        <p>The installer is ~50MB because it includes all required libraries to run smoothly on any PC. So <b>don't</b> go and <b>cry about it on RedditğŸ˜‰</b> </p>
      </details>
    </section>
  </main>

  <footer>
    <p>â˜• Love the project? <a href="https://buymeacoffee.com/whackkquackk" target="_blank">Buy me a coffee a.k.a Donate</a></p>
    <p>Goal: <b>The Goal Is â‚¬12.5</b> to afford a real domain ğŸš€</p>
  </footer>
</body>
</html>
