<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DrawScreen ‚Äî Draw on your screen</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="hero">
    <div class="hero-inner">
      <div class="hero-text">
        <h1>DrawScreen üé®</h1>
        <p class="tagline">Draw directly on your screen with keyboard hotkeys ‚Äî quick, lightweight, and free.</p>

        <div class="cta-row">
          <button class="download-btn" id="downloadBtn">‚¨á Download (50 MB)</button>
          <a class="donate-btn" href="https://buymeacoffee.com/whackkquackk" target="_blank" rel="noopener">‚òï Buy me a coffee</a>
        </div>

        <div class="live-counters">
          <div class="counter">üëÅÔ∏è <span id="views-count">‚Äì</span> views</div>
          <div class="counter">‚¨áÔ∏è <span id="downloads-count">‚Äì</span> downloads</div>
        </div>
      </div>

      <div class="hero-shot">
        <img src="assets/ss/ss1.png" alt="DrawScreen screenshot" />
      </div>
    </div>
  </header>

  <main class="container">
    <section class="about card">
      <h2>About</h2>
      <p>
        Hey ‚Äî I‚Äôm WhackkQuackk. I built <strong>DrawScreen</strong> because I wanted a tiny, no-nonsense tool
        to quickly sketch on my screen during streams, lessons, and dumb little ideas. It takes one screenshot,
        lets you draw, pick colors, and change brush size with hotkeys. My goal: keep it simple and free for everyone.
      </p>
    </section>

    <section class="screenshots card">
      <h2>Screenshots</h2>
      <div class="gallery">
        <img src="assets/ss/ss1.png" alt="screenshot 1">
        <img src="assets/ss/ss2.png" alt="screenshot 2">
        <img src="assets/ss/ss3.png" alt="screenshot 3">
      </div>
    </section>

    <section class="faq card">
      <h2>FAQ</h2>

      <div class="faq-item">
        <button class="faq-question">
          <span>How do I start drawing?</span>
          <span class="arrow">‚ñ∂</span>
        </button>
        <div class="faq-answer">
          <p>Press <b>CTRL+ALT+Z</b> to toggle the drawing overlay. Use <b>CTRL+ALT+X</b> to quit safely.</p>
        </div>
      </div>

      <div class="faq-item">
        <button class="faq-question">
          <span>How do I change brush size?</span>
          <span class="arrow">‚ñ∂</span>
        </button>
        <div class="faq-answer">
          <p>Use <b>O</b> to increase and <b>I</b> to decrease brush size. (Keyboard-first design.)</p>
        </div>
      </div>

      <div class="faq-item">
        <button class="faq-question">
          <span>How do I pick colors?</span>
          <span class="arrow">‚ñ∂</span>
        </button>
        <div class="faq-answer">
          <p>Press <b>CTRL+SHIFT+C</b> to open the color picker / eyedropper inside the app.</p>
        </div>
      </div>

      <div class="faq-item">
        <button class="faq-question">
          <span>Why is the installer ~50 MB?</span>
          <span class="arrow">‚ñ∂</span>
        </button>
        <div class="faq-answer">
          <p>The executable bundles Python and the GUI libs so it runs on any Windows PC without extra setup.</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div>Goal: <strong>‚Ç¨12.50</strong> ‚Äî to afford a real domain & hosting</div>
    <div class="copyright">¬© 2025 DrawScreen ‚Äî Made with üêç</div>
  </footer>

  <!-- Full JS: Firebase + counters + FAQ drawer + Download wiring -->
  <script type="module">
    // --- Firebase (modular v9 CDN modules) ---
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getDatabase, ref, runTransaction, onValue } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";

    // ==== YOUR FIREBASE CONFIG (as you provided) ====
    const firebaseConfig = {
      apiKey: "AIzaSyDEw59bHhaUpcgYdb9kHVmMNmNoaZO7i48",
      authDomain: "drawscreen-abfa5.firebaseapp.com",
      databaseURL: "https://drawscreen-abfa5-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "drawscreen-abfa5",
      storageBucket: "drawscreen-abfa5.firebasestorage.app",
      messagingSenderId: "906201269653",
      appId: "1:906201269653:web:451010cb0e41967e0e229c",
      measurementId: "G-VMHG8LVS5K"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);

    // refs
    const viewsRef = ref(db, "stats/views");
    const downloadsRef = ref(db, "stats/downloads");

    // Increment view once per session
      try {
      const KEY = "drawscreen_viewed_v1";
      if (!sessionStorage.getItem(KEY)) {
        runTransaction(viewsRef, (curr) => {
          const num = Number(curr) || 0; // force numeric
          return num + 1;
        });
        sessionStorage.setItem(KEY, "1");
      }
    } catch (e) {
      console.warn("view increment failed", e);
    }

    // --- live listeners to update UI ---
    onValue(viewsRef, snap => {
      const v = snap.val() || 0;
      document.getElementById("views-count").textContent = v;
    });
    onValue(downloadsRef, snap => {
      const v = snap.val() || 0;
      document.getElementById("downloads-count").textContent = v;
    });

    // --- download button increments + opens link ---
    const downloadUrl = "https://www.mediafire.com/file/pq0xpfchpbblnly/clientDr.exe/file";
    const dlBtn = document.getElementById("downloadBtn");
    dlBtn.addEventListener("click", async (e) => {
      try {
        // disable brief to avoid spam
        dlBtn.disabled = true;
        dlBtn.textContent = "Preparing...";
        await runTransaction(downloadsRef, (curr) => (curr || 0) + 1);
      } catch (err) {
        console.warn("download increment failed", err);
      } finally {
        // small timeout for UX, then open
        setTimeout(() => {
          window.open(downloadUrl, "_blank", "noopener");
          dlBtn.disabled = false;
          dlBtn.textContent = "‚¨á Download (50 MB)";
        }, 200);
      }
    });

    // --- FAQ drawer animation (robust open/close every time) ---
    document.querySelectorAll(".faq-item").forEach(item => {
      const btn = item.querySelector(".faq-question");
      const answer = item.querySelector(".faq-answer");
      const arrow = item.querySelector(".arrow");

      // ensure answer has no inline maxHeight so CSS controls initial closed state
      answer.style.maxHeight = "0px";

      btn.addEventListener("click", () => {
        const isOpen = item.classList.contains("active");

        if (isOpen) {
          // animate close: set to current height then to 0 to allow transition
          answer.style.maxHeight = answer.scrollHeight + "px";
          // force reflow then collapse
          requestAnimationFrame(() => {
            answer.style.maxHeight = "0px";
          });
          item.classList.remove("active");
          arrow.style.transform = "rotate(0deg)";
        } else {
          // open: set maxHeight to scrollHeight so it transitions open
          item.classList.add("active");
          answer.style.maxHeight = answer.scrollHeight + "px";
          arrow.style.transform = "rotate(90deg)";
          // when transition ends, keep it 'auto' so content resizing doesn't clip
          const onEnd = () => {
            // set to none so it can expand if internal content grows; remove handler after
            answer.style.maxHeight = "none";
            answer.removeEventListener("transitionend", onEnd);
          };
          answer.addEventListener("transitionend", onEnd);
        }
      });

      // If window resizes while open, update maxHeight
      window.addEventListener("resize", () => {
        if (item.classList.contains("active")) {
          answer.style.maxHeight = answer.scrollHeight + "px";
        }
      });
    });
  </script>
</body>
</html>


